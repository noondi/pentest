#!/usr/bin/python
import socket
import sys
if len(sys.argv) != 2:
	print "Usage: smtp_verify_all.py <username>"
	sys.exit(0)
# Create a Socket
s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
# Connect to the Server
# loop through the last octet. 0 to 255
for i in list(range(255)):
	try:
		connect=s.connect(("10.11.1.%i" % i,25))
		print("Working a little something on 10.11.1.%i" % i)
		# Receive the banner
		banner=s.recv(1024)
		print banner
		# VRFY a user
		s.send('VRFY ' + sys.argv[1] + '\r\n')
		result=s.recv(1024)
		print result
		# Close the socket
		s.close()
	except:
		print("10.11.1.%i" % i, "does not have port 25 open")
